# DDOS 공격기법에 대하여

## DDoS 란?

DDoS(Distributed Denial of Service) 의 약자로 서비스를 거부시키게 만들어 시스템을 마비시키는 공격이다. 보통 DDoS 는 OSI(Open Systems Interconnection) 모델의 7계층중 네트워크(계층 3)계층, 전송(계층 4)계층, 프레젠테이션(계층 6), 애플리케이션(계층 7)계층에서 많이 나타난다.


## 인프라 계층 공격

네트워크계층(3)과 전송계층(4) 은 인프라 공격으로 분류된다. 인프라 계층 공격은 보통 네트워크나 애플리케이션 서버 용량에 과부하가 걸리게 하는데 있다.

### SYN Flooding

많은 SYN 패킷을 서버로 전달해 서버의 대기큐를 가득 차게 하여 다른 클라이언트가 접속시 접속요청을 무시하도록 하는 공격입니다.

#### 3-way handshake

1. 클라이언트는 서버에게 SYN 패킷을 보내 클라이언트가 서버에 들어갈 포트가 열려있는지 확인을 한다.
2. 서버는 SYN 패킷을 받고, ACK 패킷을 응답값으로 보내준다. 이 때, 서버는 클라이언트를 접속시키기 위해 일정 RAM 을 확보해 놓는다.
3. 그리고 클라이언트는 ACK 패킷을 서버에 전달해 들어간다.

협상하는 모습과 같다하여 3-way handshake 라고 한다.

SYN Flooding 에서의 핵심은 2번이다. 클라이언트를 받아들일 준비를하고 RAM 을 열어둔 서버가 보낸 ACK 패킷을 클라이언트가 다시 보내지않고 SYN 패킷만 보내게되면, RAM 은 계속 확보가 된다. RAM 이 가득 차게되면 연결을 정상적으로 할 수 없게되는 상태가 된다.

#### 방어법

1. SYN Cookie

방화벽단에서 처음에 클라이언트의 SYN 패킷을 받고, 응답값으로 SYN 패킷 + ACK 패킷 + SYN 쿠키를 보내줍니다. SYN Cookie 에는 일종의 타이머처럼 유효한 시간 내에 클라이언트가 ACK 패킷을 같이 보내면 새로운 세션을 열어 접속을 시켜준다.

2. SYN Proxy

SYN Cookie 와 비슷한 방식이지만 차이가 있다면 세션을 새로 열지않고 클라이언트과 방화벽 사이에 연결된 3-way handshake 를 그대로 서버와 방화벽 사이에 맺어준다.

### UDP(User Datagram Packet) Flooding

1. 공격자가 대량의 UDP 패킷을 서버의 임의 포트로 보낸다.
2. 서버는 포트를 사용하는 애플리케이션을 조사한다.
3. 해당포트를 사용하는 애플리케이션이 없다는것을 확인한다.
4. 해당 포트를 찾지 못해 ICMP 패킷을 다시 출발지로 보낸다.
5. 공격자의 주소는 임의의 주소로 보냈기 때문에 전달되지 않는다.

UDP Flooding 의 핵심은 많은 수의 UDP 패킷을 처리하고 ICMP 패킷을 보내느냐 마느냐에 시스템 자원을 소비해 클라이언트의 요청에 서비스를 못하게 되는 공격이다.

### Ping Flooding

공격자가 목표 시스템에 ICMP(Internet Control Message Protocol) 에코 요청 패킷을 보내는 방법이다. 시스템에 부하를 일으키기위한 조건으로는 보내는쪽의 네트워크 대역폭이 목표 네트워크의 대역폭보다 크면 된다.

### HTTP GET Flooding

공격자가 동일한 동적 컨텐츠에 대해 HTTP GET 메서드 요청을 많이 발생시켜 서버가 해당 요청을 처리하기위해 서버 자원을 과도하게 많이 사용하도록 해 웹 서버가 정상기능을 못하도록하는 공격방법

## 참고문서

* [SYN Flooding 공격에 대해서 알아보자 - SATAz](https://sata.kr/entry/DOSDDOS-SYN-Flooding-%EA%B3%B5%EA%B2%A9%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90)
* [DDoS 공격이란 무엇입니까? - AWS](https://aws.amazon.com/ko/shield/ddos-attack-protection/)
